<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Connect to the SciViews-K (Komodo Edit/IDE) socket server and run JavaScript code in Komodo — koCmd • svKomodo</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- svPkgdown --><script src="../script.js"></script><!-- themify icon --><link rel="stylesheet" href="../themify-icons.css?nocache=123"><!--<link rel="stylesheet" href="../style.css?nocache=123">--><!-- bootstrat v4.1.1, required CSS from more recent version --><link rel="stylesheet" href="../bootstrap.more.css?nocache=123"><link href="../style.css?nocache=123" rel="stylesheet"><!-- end of addition for svPkgdown --><meta property="og:title" content="Connect to the SciViews-K (Komodo Edit/IDE) socket server and run JavaScript code in Komodo — koCmd"><meta property="og:description" content="If Komodo Edit/IDE with the SciViews-K extension is running on your machine,
you can connect to its socket server and run javascript code in it with this
function."><meta name="twitter:card" content="summary"><!-- Mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js" async integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/config/TeX-AMS-MML_HTMLorMML.js" async integrity="sha256-4zys9A4hMQmtq2EUL+JRoXc0NZi8jVJMzb8onewOaSQ=" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><!--<script async src="https://www.googletagmanager.com/gtag/js?id=UA-462421-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-462421-8');
</script>--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><!-- preloader start --><div class="preloader">
  <img src="../preloader.gif" alt="loading..."></div>
<!-- preloader end -->

<div class="navbar navbar-default navbar-fixed-top bg-secondary" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="navbar-brand-container">
       <div class="navbar-brand-logo">
         <a class="external-link navbar-brand" href="https://www.sciviews.org">
          <img src="../logo_full.png" alt="SciViews"></a>
       </div>
       <div class="navbar-brand-package">
      </div>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <!-- start svPkgdown global site search with Google -->
      <form action="https://www.google.com/search" class="navbar-form navbar-right search-form-global">
        <div class="form-group has-search">
          <span class="fa fa-search form-control-feedback-global"></span>
          <input type="text" class="form-control-global search-form-input" name="q" id="q" placeholder="Search..." required><input type="hidden" name="sitesearch" value="https://www.sciviews.org"></div>
      </form>
      <!-- end svPkgdown global site search with Google -->
      <ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/SciViews/svKomodo/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><div class="navbar-title">
        <a class="navbar-brand" href="../index.html"><p class="h2">svKomodo <small>v1.0.0</small></p></a>
      </div>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
  <div class="navbar-spacer bg-light">
  </div>
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Connect to the SciViews-K (Komodo Edit/IDE) socket server and run JavaScript code in Komodo</h1>
    <small class="dont-index">Source: <a href="https://github.com/SciViews/svKomodo/blob/HEAD/R/koCmd.R" class="external-link"><code>R/koCmd.R</code></a></small>
    <div class="hidden name"><code>koCmd.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>If Komodo Edit/IDE with the SciViews-K extension is running on your machine,
you can connect to its socket server and run javascript code in it with this
function.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">koCmd</span><span class="op">(</span>
  <span class="va">cmd</span>,
  data <span class="op">=</span> <span class="cn">NULL</span>,
  async <span class="op">=</span> <span class="cn">FALSE</span>,
  host <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"ko.host"</span><span class="op">)</span>,
  port <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"ko.port"</span><span class="op">)</span>,
  kotype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"ko.kotype"</span><span class="op">)</span>,
  timeout <span class="op">=</span> <span class="fl">2</span>,
  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"js"</span>, <span class="st">"rjsonp"</span>, <span class="st">"output"</span><span class="op">)</span>,
  pad <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>cmd</dt>
<dd><p>the JavaScript you want to execute in Komodo Edit, in a character</p></dd>
<dt>data</dt>
<dd><p>if a named list, replace <code>&lt;&lt;&lt;name&gt;&gt;&gt;</code> in cmd for each name of the
list by its component first. If a character string, replace <code>&lt;&lt;&lt;data&gt;&gt;&gt;</code> in
cmd. If <code>NULL</code> (by default), do nothing to cmd before submitting it. See the
last examples for using data.</p></dd>
<dt>async</dt>
<dd><p>not used yet!</p></dd>
<dt>host</dt>
<dd><p>the host where Komodo is located. Currently, only <code>localhost</code> is
accepted. Can be changed by setting <code>options(ko.host = ....)</code>.</p></dd>
<dt>port</dt>
<dd><p>the socket port where the SciViews-K server is listening, by
default, it is port 7052. Can be changed by setting
<code>options(ko.port = ....)</code>.</p></dd>
<dt>kotype</dt>
<dd><p>the type of Komodo server in use. Currently
(SciViews-K &gt;= 0.9-25), it can be either <code>"socket"</code> or <code>"file"</code>.</p></dd>
<dt>timeout</dt>
<dd><p>number of seconds to wait for a response.</p></dd>
<dt>type</dt>
<dd><p>which type of Komodo command do we send? If <code>type = "js"</code> (by
default), <code>cmd</code> is considered to be JavaScript code to be evaluated in
Komodo. If <code>type = "rjsonp"</code>, <code>cmd</code> is parsed as RJson object with padding
(included in a JavaScript function call) and will be evaluated as such in
Komodo. if <code>type = "output"</code>, the string in <code>cmd</code> is considered to be some R
output and will be displayed in the Komodo local R console (no evaluation).</p></dd>
<dt>pad</dt>
<dd><p>a string naming the JavaScript function to run in Komodo, with the
constructed RJson object as argument. If <code>NULL</code> (by default), the RJson
object is evaluated directly without padding.</p></dd>
<dt>...</dt>
<dd><p>further arguments to pass to <code><a href="https://www.sciviews.org/svMisc/reference/to_rjson.html" class="external-link">toRjson()</a></code>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Returns the results of the evaluation of the javascript code in
Komodo Edit/IDE if <code>async = FALSE</code>. Note that <code>async = TRUE</code> is not
supported yet.
If there is an error, or <code>cmd</code> is an invalid JavaScript code, a character
string containing javascript error message is returned (this is changed from
version 0.9-47, previously a 'try-error' was returned).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Komodo Edit (https://www.activestate.com/products/komodo-ide/) is an Open
Source (MPL, GPL &amp; LGPL) editor based on the excellent Mozilla platform and
the powerful Scintilla text editor widget. It runs on many Linux
distributions, on Windows and on MacOS. Komodo IDE was a commercial
equivalent, but with many tools for developers, especially targeting
languages like Perl, Tcl, Python, Ruby, etc. This product is now freely
distributed as well and Komodo Edit was deprecated. However, the project does
not appear to be actively maintained any more and it may not work on more
recent MacOS or Windows versions.</p>
<p><code>koCmd()</code> can only talk to Komodo if the SciViews-K socket server is
installed. This server is contained in the SciViews-K extension that you can
download from https://github.com/SciViews/sciviewsk. See Komodo documentation
to know how to install this extension (drag and drop of the extension on the
Komodo window works in most platforms).</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Because of security concerns, the SciViews-K server only allows connections
from local clients (running on the same computer). This limitation would be
relatively easy to eliminate, but at your own risks!</p>
<p>Data are returned from Komodo to R by using the JavaScript function
<code>sv.socket.serverWrite()</code>, see the examples bellow.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="https://www.sciviews.org/svSocket/reference/start_socket_server.html">svSocket::startSocketServer()</a></code>, <code><a href="https://www.sciviews.org/svSocket/reference/process_socket_server.html">svSocket::processSocket()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># Make sure you have started Komodo Edit or IDE with the SciViews-K extension</span></span>
<span class="r-in"><span class="co"># installed on the same machine, and the socket server started and then...</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Send JavaScript commands to Komodo</span></span>
<span class="r-in"><span class="co"># Alert box in Komodo, and then reply to R</span></span>
<span class="r-in"><span class="fu">koCmd</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'alert("Hello from R!");'</span>,</span>
<span class="r-in">  <span class="st">'sv.socket.serverWrite("Hello from OpenKomodo (" + ko.interpolate.currentFilePath() + ")");'</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Open a web page wih Komodo configuration</span></span>
<span class="r-in"><span class="fu">koCmd</span><span class="op">(</span><span class="st">"ko.open.URI('about:config','browser');"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Get info from Komodo</span></span>
<span class="r-in"><span class="fu">koCmd</span><span class="op">(</span><span class="st">"sv.socket.serverWrite(ko.logging.getStack());"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Passing a large amount of data to Komodo, and then, back to R</span></span>
<span class="r-in"><span class="fu">koCmd</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'sv.socket.serverWrite("'</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">iris</span>, collapse <span class="op">=</span> <span class="st">"\\\\n"</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span>, <span class="st">'");'</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># It is easier to use 'data =' instead of paste() for constructing the JS command</span></span>
<span class="r-in"><span class="fu">koCmd</span><span class="op">(</span><span class="st">'alert("&lt;&lt;&lt;data&gt;&gt;&gt;");'</span>, data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/search.html" class="external-link">search</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Using a named list for data to replace in the cmd</span></span>
<span class="r-in"><span class="fu">koCmd</span><span class="op">(</span><span class="st">'alert("This is R version &lt;&lt;&lt;major&gt;&gt;&gt;.&lt;&lt;&lt;minor&gt;&gt;&gt;");'</span>, <span class="va">R.version</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Sending incorrect JavaScript instruction</span></span>
<span class="r-in"><span class="fu">koCmd</span><span class="op">(</span><span class="st">'nonexistingJSfunction();'</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Should return something like:</span></span>
<span class="r-in"><span class="co"># "ReferenceError: nonexistingJSfunction is not defined"</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Sending RJsonP (RJson with padding) instruction to Komodo</span></span>
<span class="r-in"><span class="fu">koCmd</span><span class="op">(</span><span class="st">"Hello with RJsonP!"</span>, type <span class="op">=</span> <span class="st">"rjsonp"</span>, pad <span class="op">=</span> <span class="st">"alert"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># This is more useful to pass complex R objects to Komodo</span></span>
<span class="r-in"><span class="fu">koCmd</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"rjsonp"</span>, pad <span class="op">=</span> <span class="st">"sv.socket.serverWrite"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Send simple text (no evaluation) to the Komodo R console</span></span>
<span class="r-in"><span class="fu">koCmd</span><span class="op">(</span><span class="st">"Hello again from R!"</span>, type <span class="op">=</span> <span class="st">"output"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><!-- footer --><!--<footer class="bg-secondary">--><div class="bg-secondary full-width">
    <div class="py-100 border-bottom" style="border-color: #454547 !important">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4">
                    <div class="mb-5 mb-md-0 text-center text-md-left">
                        <!-- logo -->
                        <img class="mb-30" src="https://www.sciviews.org/images/logo-footer.png" alt="logo"><p class="text-white mb-30"> We build software for reproducible research with R</p>
                        <!-- social icon -->
                        <ul class="list-inline"><li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://github.com/SciViews">
                                    <i class="ti-github"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://twitter.com/PhilGrosjean">
                                    <i class="ti-twitter-alt"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://www.linkedin.com/in/philippe-grosjean-5b6b29a2/">
                                    <i class="ti-linkedin"></i>
                                </a>
                            </li>

                        </ul></div>
                </div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Related</p>
                    <ul class="footer-links"><li>
                            <a href="http://econum.umons.ac.be" class="external-link">Our Lab</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/fs/en/" class="external-link">Our Faculty</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/complexys/en/" class="external-link">Complexys</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/infortech/en/" class="external-link">InforTech</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/en/" class="external-link">UMONS</a>
                        </li>

                    </ul></div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Quick Link</p>
                    <ul class="footer-links"><li>
                            <a href="https://www.sciviews.org/software/svbox" class="external-link">SciViews Box</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/sciviews-r" class="external-link">SciViews::R</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/zooimage" class="external-link">Zoo/PhytoImage</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/blog" class="external-link">Blog</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/about" class="external-link">About</a>
                        </li>

                    </ul></div>
                <!-- subscribe form -->
                <div class="col-lg-3 col-md-12 offset-lg-1">
                    <div class="mt-5 mt-lg-0 text-center text-md-left">
                             <p class="h4 mb-4 text-white">Contact Us</p>
                             <p class="text-white mb-4">Need more info?<br><a href="mailto:info@sciviews.org"><span class="text-primary">Leave us a mail...</span></a></p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- copyright -->
    <div class="pt-4 pb-3 position-relative">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-5">
                    <p class="text-white text-center text-md-left">
                        <span class="text-primary">SciViews</span> © All Right Reserved</p>
                </div>
                <div class="col-lg-6 col-md-7">
                    <ul class="list-inline text-center text-md-right"><li class="list-inline-item mx-lg-3 my-lg-0 mx-2 my-2">
                            <a class="external-link font-secondary text-white" href="https://creativecommons.org/licenses/by/4.0/">Site content under CC-BY 4.0 license</a>
                        </li>

                    </ul></div>
            </div>
        </div>
        <!-- back to top -->
        <!--<button class="back-to-top">
            <i class="ti-angle-up"></i>
        </button>-->
    </div>
</div>
<!--</footer>-->
<!-- /footer -->

      </footer></div>

  


  

  </body></html>

